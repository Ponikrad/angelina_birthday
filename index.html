<!doctype html>
<html lang="uk">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>üëë Happy Birthday –ê–Ω–≥–µ–ª–æ—á–æ–∫ üëë</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,700;1,400&family=Marck+Script&family=Nunito:wght@400;600;800&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
      :root {
        --gold: #f5c842;
        --deep-gold: #c99b1a;
        --rose: #ff6b9d;
        --cream: #fff9f0;
        --dark: #1a0a2e;
        --purple: #3d1c6e;
      }

      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      body {
        font-family: "Nunito", sans-serif;
        background: radial-gradient(
          ellipse at top,
          #2d0a4e 0%,
          #1a0a2e 40%,
          #0d0520 100%
        );
        color: white;
        min-height: 100vh;
        overflow-x: hidden;
        cursor:
          url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3E%3Ctext y='20' font-size='20'%3E‚ú®%3C/text%3E%3C/svg%3E"),
          auto;
      }

      /* Stars */
      .stars {
        position: fixed;
        inset: 0;
        pointer-events: none;
        z-index: 0;
        overflow: hidden;
      }
      .star {
        position: absolute;
        width: 3px;
        height: 3px;
        background: white;
        border-radius: 50%;
        animation: twinkle var(--d) ease-in-out infinite var(--delay);
        opacity: 0;
      }
      @keyframes twinkle {
        0%,
        100% {
          opacity: 0;
          transform: scale(0.5);
        }
        50% {
          opacity: 1;
          transform: scale(1.2);
        }
      }

      .page {
        position: relative;
        z-index: 1;
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 40px 20px 100px;
        gap: 30px;
      }

      /* Header */
      .header {
        text-align: center;
        animation: fadeDown 1s ease both;
      }
      .header h1 {
        font-family: "Marck Script", cursive;
        font-size: clamp(2.2rem, 7vw, 4.5rem);
        line-height: 1.3;
        filter: drop-shadow(0 0 20px rgba(255, 200, 50, 0.4));
      }
      .header h1 .text-gradient {
        background: linear-gradient(135deg, #ffe066, #ff6b9d, #ffe066);
        background-size: 200%;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        animation: shimmer 3s linear infinite;
        display: inline;
      }
      .header .not-ny {
        font-family: "Nunito", sans-serif;
        font-size: 0.75rem;
        color: rgba(255, 255, 255, 0.45);
        letter-spacing: 1px;
        margin-top: -4px;
        margin-bottom: 4px;
        font-style: italic;
      }
      .header .subtitle {
        font-size: 1rem;
        color: rgba(255, 255, 255, 0.6);
        letter-spacing: 4px;
        text-transform: uppercase;
        margin-top: 8px;
      }
      @keyframes shimmer {
        0% {
          background-position: 0%;
        }
        100% {
          background-position: 200%;
        }
      }
      @keyframes fadeDown {
        from {
          opacity: 0;
          transform: translateY(-30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* Crown + Photo Frame */
      .frame-wrapper {
        position: relative;
        display: inline-block;
        animation: floatUp 1.2s ease both 0.3s;
      }
      @keyframes floatUp {
        from {
          opacity: 0;
          transform: translateY(40px) scale(0.8);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }

      .crown {
        position: absolute;
        top: -70px;
        left: 50%;
        transform: translateX(-50%);
        font-size: 80px;
        filter: drop-shadow(0 0 15px rgba(255, 200, 50, 0.8));
        animation: crownBob 2s ease-in-out infinite;
        z-index: 2;
      }
      @keyframes crownBob {
        0%,
        100% {
          transform: translateX(-50%) translateY(0) rotate(-3deg);
        }
        50% {
          transform: translateX(-50%) translateY(-8px) rotate(3deg);
        }
      }

      .photo-ring {
        width: 220px;
        height: 220px;
        border-radius: 50%;
        padding: 6px;
        background: conic-gradient(
          from 0deg,
          #f5c842,
          #ff6b9d,
          #a855f7,
          #f5c842,
          #ff6b9d,
          #a855f7,
          #f5c842
        );
        animation: rotateBorder 4s linear infinite;
        position: relative;
      }

      .photo-ring-inner {
        width: 100%;
        height: 100%;
        border-radius: 50%;
        overflow: hidden;
        background: #2d0a4e;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 80px;
      }
      .photo-ring-inner img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        border-radius: 50%;
        display: block;
      }

      .sparkles-ring {
        position: absolute;
        inset: -15px;
        border-radius: 50%;
        pointer-events: none;
      }
      .sparkle-dot {
        position: absolute;
        width: 8px;
        height: 8px;
        border-radius: 50%;
        background: var(--gold);
        box-shadow: 0 0 8px var(--gold);
        animation: orbitSpark 3s linear infinite;
      }

      /* Monkey GIFs row */
      .monkeys {
        display: flex;
        gap: 20px;
        align-items: center;
        animation: fadeIn 1s ease both 0.5s;
        flex-wrap: wrap;
        justify-content: center;
      }
      .monkey-gif {
        width: 90px;
        height: 90px;
        border-radius: 12px;
        border: 3px solid var(--gold);
        box-shadow: 0 0 15px rgba(245, 200, 66, 0.3);
        overflow: hidden;
        background: #2d0a4e;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 50px;
        animation: monkeyDance 0.5s ease-in-out infinite alternate;
      }
      .monkey-gif:nth-child(2) {
        animation-delay: 0.15s;
      }
      .monkey-gif:nth-child(3) {
        animation-delay: 0.3s;
      }
      @keyframes monkeyDance {
        from {
          transform: rotate(-8deg) scale(0.95);
        }
        to {
          transform: rotate(8deg) scale(1.05);
        }
      }
      .monkey-gif img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      /* Greeting */
      .greeting {
        max-width: 600px;
        text-align: center;
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 200, 66, 0.2);
        border-radius: 24px;
        padding: 30px 35px;
        backdrop-filter: blur(10px);
        animation: fadeIn 1s ease both 0.7s;
        position: relative;
        overflow: hidden;
      }
      .greeting::before {
        content: "";
        position: absolute;
        inset: 0;
        background: linear-gradient(
          135deg,
          rgba(245, 200, 66, 0.05),
          rgba(255, 107, 157, 0.05)
        );
        border-radius: 24px;
      }
      .greeting p {
        font-size: 1.1rem;
        line-height: 1.8;
        color: rgba(255, 255, 255, 0.9);
        position: relative;
      }
      .greeting .big-emoji {
        font-size: 2rem;
        margin-bottom: 10px;
        display: block;
      }

      /* Contract */
      .contract-wrapper {
        max-width: 620px;
        width: 100%;
        animation: fadeIn 1s ease both 0.9s;
      }
      .contract {
        background: var(--cream);
        color: #2d1a00;
        border-radius: 20px;
        padding: 35px 40px;
        position: relative;
        box-shadow:
          0 20px 60px rgba(0, 0, 0, 0.4),
          0 0 0 3px var(--gold),
          0 0 0 6px rgba(245, 200, 66, 0.2);
        font-family: "Nunito", sans-serif;
      }
      .contract::before {
        content: "";
        position: absolute;
        top: 15px;
        bottom: 15px;
        left: 15px;
        right: 15px;
        border: 1px dashed rgba(100, 60, 0, 0.2);
        border-radius: 12px;
        pointer-events: none;
      }
      .contract h2 {
        font-family: "Playfair Display", serif;
        font-size: 1.4rem;
        text-align: center;
        color: #6b3a00;
        margin-bottom: 6px;
      }
      .contract .contract-sub {
        text-align: center;
        color: #8b5e00;
        font-size: 0.8rem;
        letter-spacing: 2px;
        text-transform: uppercase;
        margin-bottom: 20px;
      }
      .contract ol {
        padding-left: 22px;
        display: flex;
        flex-direction: column;
        gap: 12px;
      }
      .contract li {
        font-size: 0.98rem;
        line-height: 1.5;
        color: #3d2000;
        padding: 8px 12px;
        background: rgba(245, 200, 66, 0.1);
        border-left: 3px solid var(--deep-gold);
        border-radius: 0 8px 8px 0;
      }
      .contract .stamp {
        position: absolute;
        top: 20px;
        right: 20px;
        width: 70px;
        height: 70px;
        border: 3px solid rgba(180, 0, 0, 0.5);
        border-radius: 50%;
        color: rgba(180, 0, 0, 0.5);
        font-size: 0.55rem;
        font-weight: 800;
        letter-spacing: 1px;
        text-transform: uppercase;
        display: flex;
        align-items: center;
        justify-content: center;
        text-align: center;
        transform: rotate(15deg);
        line-height: 1.3;
      }
      .signature-line {
        margin-top: 25px;
        border-top: 1px solid rgba(100, 60, 0, 0.3);
        padding-top: 15px;
        display: flex;
        justify-content: space-between;
        align-items: flex-end;
        font-size: 0.85rem;
        color: #8b5e00;
      }
      .signature-line .sig-field {
        border-bottom: 1px solid #8b5e00;
        min-width: 150px;
        height: 24px;
        display: flex;
        align-items: flex-end;
        font-style: italic;
        font-size: 0.75rem;
        padding-bottom: 2px;
        color: #b07a00;
      }
      #signedName {
        display: none;
        font-family: "Marck Script", cursive;
        font-size: 1.3rem;
        color: #8b0000;
        animation: signAppear 0.5s ease;
      }
      @keyframes signAppear {
        from {
          opacity: 0;
          transform: scaleX(0);
        }
        to {
          opacity: 1;
          transform: scaleX(1);
        }
      }

      /* Sign button */
      #signBtn {
        position: fixed;
        padding: 14px 32px;
        font-family: "Nunito", sans-serif;
        font-size: 1.1rem;
        font-weight: 800;
        background: linear-gradient(135deg, var(--gold), #ffaa00);
        color: #2d1a00;
        border: none;
        border-radius: 50px;
        cursor: pointer;
        box-shadow:
          0 8px 25px rgba(245, 200, 66, 0.4),
          0 0 0 3px rgba(245, 200, 66, 0.2);
        transition:
          transform 0.1s,
          box-shadow 0.1s;
        z-index: 1000;
        white-space: nowrap;
        bottom: 30px;
        left: 50%;
        transform: translateX(-50%);
      }
      #signBtn:hover {
        transform: translateX(-50%) scale(1.05);
      }
      #signBtn.escaped {
        transition: none;
      }

      /* Message & Success */
      #message {
        position: fixed;
        bottom: 80px;
        left: 50%;
        transform: translateX(-50%);
        font-size: 1.1rem;
        font-weight: 700;
        color: var(--rose);
        text-align: center;
        z-index: 999;
        text-shadow: 0 0 20px rgba(255, 107, 157, 0.5);
        min-height: 30px;
        white-space: nowrap;
        background: rgba(30, 10, 50, 0.8);
        padding: 8px 20px;
        border-radius: 20px;
        border: 1px solid rgba(255, 107, 157, 0.3);
        backdrop-filter: blur(8px);
        transition: opacity 0.3s;
        opacity: 0;
      }
      #message.show {
        opacity: 1;
      }

      #success {
        display: none;
        text-align: center;
        animation: successPop 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275) both;
        padding: 30px;
        background: rgba(255, 255, 255, 0.05);
        border: 2px solid rgba(245, 200, 66, 0.4);
        border-radius: 24px;
        max-width: 500px;
        backdrop-filter: blur(10px);
      }
      @keyframes successPop {
        from {
          opacity: 0;
          transform: scale(0.5) rotate(-5deg);
        }
        to {
          opacity: 1;
          transform: scale(1) rotate(0deg);
        }
      }
      #success h2 {
        font-family: "Marck Script", cursive;
        font-size: 2rem;
        color: var(--gold);
        margin-bottom: 10px;
      }
      #success p {
        color: rgba(255, 255, 255, 0.8);
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* Floating hearts */
      .floating-heart {
        position: fixed;
        pointer-events: none;
        font-size: 1.5rem;
        animation: floatHeart 4s ease-in forwards;
        z-index: 999;
      }
      @keyframes floatHeart {
        0% {
          opacity: 1;
          transform: translateY(0) rotate(0deg) scale(1);
        }
        100% {
          opacity: 0;
          transform: translateY(-300px) rotate(360deg) scale(0.5);
        }
      }

      @media (max-width: 480px) {
        .contract {
          padding: 25px 20px;
        }
        .crown {
          font-size: 60px;
          top: -55px;
        }
        .photo-ring {
          width: 180px;
          height: 180px;
        }
      }
    </style>
  </head>
  <body>
    <!-- Stars background -->
    <div class="stars" id="stars"></div>

    <div class="page">
      <!-- Header -->
      <div class="header">
        <h1>
          <span class="text-gradient">‚ú¶ Happy Birthday,</span><br /><span
            class="text-gradient"
            >–ê–Ω–≥–µ–ª–æ—á–æ–∫</span
          >
          üòà ‚ú¶
        </h1>
        <div class="not-ny">(–ù–µ –ø—É—Ç–∞—Ç–∏ –∑ Happy New Year)</div>
      </div>

      <!-- Photo Frame with Crown -->
      <div class="frame-wrapper">
        <div class="crown">üëë</div>
        <div class="photo-ring">
          <div class="photo-ring-inner">
            <img src="img.JPG" />
          </div>
        </div>
      </div>

      <!-- Dancing Monkeys -->
      <div class="monkeys">
        <div class="monkey-gif">
          <img src="m1.gif" alt="monkey" />
        </div>
        <div class="monkey-gif">
          <img src="m2.gif" alt="monkey" />
        </div>
      </div>

      <!-- Greeting -->
      <div class="greeting">
        <span class="big-emoji">üéâüéâüéâ</span>
        <p>
          –ü—Ä—ñ–≤—î—Ç –¥–∞—Ä–∞–≥—É—à–∞.<br />

          –ë–∞–∂–∞—é, —â–æ–± —É—Å—ñ —Ç–≤–æ—ó –º—Ä—ñ—ó –∑–¥—ñ–π—Å–Ω–∏–ª–∏—Å—å —ñ —â–æ–± –∫–æ–∂–µ–Ω —Ä—ñ–∫ —Å—Ç–∞–≤–∞–≤ —Ü—ñ–∫–∞–≤—ñ—à–∏–º
          –∑–∞ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ–π ‚Äî –∞–ª–µ —Ö–æ—á —Ç—Ä–æ—Ö–∏ –º–µ–Ω—à –Ω–µ–±–µ–∑–ø–µ—á–Ω–∏–º –¥–ª—è –æ—Ç–æ—á—É—é—á–∏—Ö xD (P.S.
          –ó–Ω–∞—é—á–∏ —Ç–µ–±–µ, —è–∫—É—Å—å –ø—Ä–∏–≥–æ–¥—É –Ω–∞ –¥—É–ø—É —Ç–∏ –∑–Ω–∞–π–¥–µ—à —É –±—É–¥—å-—è–∫–æ–º—É –≤–∏–ø–∞–¥–∫—É).
          <br />
          –ù—É —ñ —â–∞—Å—Ç—è, –∑–¥–æ—Ä–æ–≤–ª—è, —Ç–∞ —Ç–∞–∫–µ üòÅ<br /><br />
          –ó –î–Ω–µ–º –ù–∞—Ä–æ–¥–∂–µ–Ω–Ω—è, –∂—É–ª—ñ–∫ :)<br />
          <br />
          (P.P.S. –ö–æ—Ä–∏—Å—Ç—É—é—á–∏—Å—å –Ω–∞–≥–æ–¥–æ—é –ø–æ–ø—Ä–æ—à—É –æ–∑–Ω–∞–π–æ–º–∏—Ç–∏—Å—å —Ç–∞ –ø—ñ–¥–ø–∏—Å–∞—Ç–∏ –ø–æ–¥–∞–Ω–∏–π
          –Ω–∏–∂—á–µ –¥–æ–≥–æ–≤—ñ—Ä)
        </p>
      </div>

      <!-- Contract -->
      <div class="contract-wrapper">
        <div class="contract">
          <div class="stamp">‚ö†Ô∏è<br />–û–±–æ–≤'—è–∑–∫–æ–≤–æ<br />–¥–æ –ø—ñ–¥–ø–∏—Å–∞–Ω–Ω—è</div>
          <h2>üìú –î–æ–≥–æ–≤—ñ—Ä –ø—Ä–æ –Ω–∞—Å—Ç—É–ø–Ω–∏–π –ø–æ—Ö—ñ–¥</h2>
          <div class="contract-sub">–í–µ—Ä—Å—ñ—è 1.0 ¬∑ –ì—ñ—Ä—Å—å–∫–∞ —Ä–µ–¥–∞–∫—Ü—ñ—è</div>
          <ol>
            <li>
              üö´ –ù–µ –∑–±—ñ–≥–∞—Ç–∏ –ø'—è–Ω–æ—é –∑ –≥—ñ—Ä –±–µ–∑ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–≥–æ —É–∑–≥–æ–¥–∂–µ–Ω–Ω—è –∑ –∫–æ–º–∞–Ω–¥–æ—é
            </li>
            <li>
              üçì –ù–µ –ª—ñ–∑—Ç–∏ –¥–æ –∫—É—â—ñ–≤ –∑ —è–≥–æ–¥–∫–∞–º–∏ –Ω–∞ –æ–±—Ä–∏–≤–∞—Ö (–≤–∫–ª—é—á–Ω–æ –∑ "–¥—É–∂–µ
              –∫—Ä–∞—Å–∏–≤–∏–º–∏")
            </li>
            <li>
              ‚õî "–û—Å—Ç–∞–Ω–Ω—è —è–∫–≥–æ–¥–∫–∞" ‚Äî –Ω–µ –∞—Ä–≥—É–º–µ–Ω—Ç —ñ –Ω–µ –ø—Ä–∏–π–º–∞—î—Ç—å—Å—è –Ω—ñ –∑–∞ —è–∫–∏—Ö
              –æ–±—Å—Ç–∞–≤–∏–Ω
            </li>
            <li>
              üìù –î–æ–≥–æ–≤—ñ—Ä –º–æ–∂–µ –±—É—Ç–∏ –¥–æ–ø–æ–≤–Ω–µ–Ω–∏–π —É —Ä–∞–∑—ñ –≤–∏–Ω–∏–∫–Ω–µ–Ω–Ω—è –Ω–µ–ø–µ—Ä–µ–¥–±–∞—á—É–≤–∞–Ω–∏—Ö
              —Å–∏—Ç—É–∞—Ü—ñ–π xD
            </li>
          </ol>
          <div class="signature-line">
            <span>–ü—ñ–¥–ø–∏—Å:</span>
            <div class="sig-field">
              <span id="signedName">–ê–Ω–≥–µ–ª—ñ–Ω–∞ ‚úçÔ∏è</span>
            </div>
            <span>–î–∞—Ç–∞: <b id="todayDate"></b></span>
          </div>
        </div>
      </div>

      <!-- Success -->
      <div id="success">
        <h2>üéâ –î–æ–≥–æ–≤—ñ—Ä –ø—ñ–¥–ø–∏—Å–∞–Ω–æ! üéâ</h2>
        <p>
          –¢–∏ —É—Å–ø—ñ—à–Ω–æ <b>–û—Ñ–æ—Ä–º–∏–ª–∞ –∫—Ä–µ–¥–∏—Ç</b><br />–ó—É—Å—Ç—Ä—ñ–Ω–µ–º–æ—Å—å –Ω–∞ –ö–∞–Ω–∞—Ä–∞—Ö! ü•Ç
        </p>
      </div>
    </div>

    <!-- Floating message & button -->
    <div id="message"></div>
    <button id="signBtn">‚úçÔ∏è –ü—ñ–¥–ø–∏—Å–∞—Ç–∏ –¥–æ–≥–æ–≤—ñ—Ä</button>

    <script>
      // Stars
      const starsEl = document.getElementById("stars");
      for (let i = 0; i < 150; i++) {
        const s = document.createElement("div");
        s.className = "star";
        s.style.cssText = `left:${Math.random() * 100}%;top:${Math.random() * 100}%;--d:${1.5 + Math.random() * 3}s;--delay:${-Math.random() * 5}s;width:${1 + Math.random() * 3}px;height:${1 + Math.random() * 3}px;`;
        starsEl.appendChild(s);
      }

      // Date
      document.getElementById("todayDate").textContent =
        new Date().toLocaleDateString("uk-UA");

      const btn = document.getElementById("signBtn");
      const message = document.getElementById("message");
      const success = document.getElementById("success");
      const signedName = document.getElementById("signedName");

      let attempts = 0;
      const maxEscapes = 4;
      let signed = false;

      const msgs = [
        "–¢–∏ —Ç–æ—á–Ω–æ –≤–ø–µ–≤–Ω–µ–Ω–∞? ü§î",
        "–ù—É —Ü–µ –∂ –¥—É–∂–µ —Å–µ—Ä–π–æ–∑–Ω–æ... üò¨",
        "–û—Å—Ç–∞—Ç–Ω—ñ–π —à–∞–Ω—Å –ø–µ—Ä–µ–¥—É–º–∞—Ç–∏! üòÖ",
        "–û–∫-–æ–∫, –ø—ñ–π–º–∞–ª–∞! üòÇ",
      ];

      function showMessage(text) {
        message.textContent = text;
        message.classList.add("show");
        clearTimeout(message._timeout);
        message._timeout = setTimeout(
          () => message.classList.remove("show"),
          3000,
        );
      }

      function spawnHeart(x, y) {
        const h = document.createElement("div");
        h.className = "floating-heart";
        h.textContent = ["üíñ", "üíï", "‚ú®", "üå∏", "üí´"][
          Math.floor(Math.random() * 5)
        ];
        h.style.left = x + "px";
        h.style.top = y + "px";
        document.body.appendChild(h);
        setTimeout(() => h.remove(), 4000);
      }

      btn.addEventListener("mouseenter", function (e) {
        if (signed || attempts >= maxEscapes) return;

        attempts++;
        showMessage(msgs[attempts - 1]);

        if (attempts < maxEscapes) {
          const margin = 80;
          const x =
            margin +
            Math.random() * (window.innerWidth - btn.offsetWidth - margin * 2);
          const y =
            margin +
            Math.random() *
              (window.innerHeight - btn.offsetHeight - margin * 2);

          btn.classList.add("escaped");
          btn.style.transition = "none";
          btn.style.position = "fixed";
          btn.style.left = x + "px";
          btn.style.top = y + "px";
          btn.style.bottom = "auto";
          btn.style.transform = "none";

          setTimeout(() => btn.classList.remove("escaped"), 50);
        }
      });

      btn.addEventListener("click", function (e) {
        if (signed) return;

        if (attempts >= maxEscapes) {
          signed = true;
          btn.style.display = "none";
          message.classList.remove("show");
          success.style.display = "block";
          signedName.style.display = "inline";

          // Big confetti
          confetti({
            particleCount: 150,
            spread: 120,
            origin: { y: 0.6 },
            colors: ["#f5c842", "#ff6b9d", "#a855f7", "#ffffff"],
          });
          setTimeout(
            () =>
              confetti({
                particleCount: 100,
                angle: 60,
                spread: 80,
                origin: { x: 0, y: 0.7 },
              }),
            400,
          );
          setTimeout(
            () =>
              confetti({
                particleCount: 100,
                angle: 120,
                spread: 80,
                origin: { x: 1, y: 0.7 },
              }),
            700,
          );
          setTimeout(
            () =>
              confetti({
                particleCount: 200,
                spread: 180,
                origin: { y: 0.4 },
                shapes: ["star"],
              }),
            1200,
          );

          // Hearts
          for (let i = 0; i < 10; i++) {
            setTimeout(
              () =>
                spawnHeart(
                  Math.random() * window.innerWidth,
                  Math.random() * window.innerHeight * 0.8,
                ),
              i * 150,
            );
          }
        } else {
          // Clicked before enough attempts ‚Äî escape!
          spawnHeart(e.clientX, e.clientY);
          showMessage("–ö—É–¥–∏-–∫—É–¥–∏! –©–µ –Ω–µ —á–∞—Å! üòà");
          const margin = 80;
          const x =
            margin +
            Math.random() * (window.innerWidth - btn.offsetWidth - margin * 2);
          const y =
            margin +
            Math.random() *
              (window.innerHeight - btn.offsetHeight - margin * 2);
          btn.style.transition = "none";
          btn.style.position = "fixed";
          btn.style.left = x + "px";
          btn.style.top = y + "px";
          btn.style.bottom = "auto";
          btn.style.transform = "none";
          attempts = Math.min(attempts + 1, maxEscapes - 1);
        }
      });

      // Mobile: tap to escape
      btn.addEventListener("touchstart", function (e) {
        if (signed || attempts >= maxEscapes) return;
        e.preventDefault();
        attempts++;
        if (attempts < maxEscapes) {
          showMessage(msgs[attempts - 1]);
          const margin = 40;
          const x =
            margin +
            Math.random() * (window.innerWidth - btn.offsetWidth - margin * 2);
          const y =
            margin +
            Math.random() *
              (window.innerHeight - btn.offsetHeight - margin * 2);
          btn.style.transition = "none";
          btn.style.position = "fixed";
          btn.style.left = x + "px";
          btn.style.top = y + "px";
          btn.style.bottom = "auto";
          btn.style.transform = "none";
        } else {
          // Allow tap to sign on last attempt
          btn.click();
        }
      });
    </script>
  </body>
</html>
